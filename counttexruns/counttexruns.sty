\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{counttexruns}
    [2012/08/26 ]

\newcounter{counttexruns}

\newwrite\@counttexrunsfile
\IfFileExists{\jobname.ctr}{
\immediate\openin\@counttexrunsfile=\jobname.ctr
\immediate\read\@counttexrunsfile to \counttexruns
\immediate\read\@counttexrunsfile to \counttexruns
\immediate\closeout\@counttexrunsfile
\setcounter{counttexruns}{\counttexruns}
}{} %% \value{counttexruns} is still zero

\stepcounter{counttexruns}

\immediate\openout\@counttexrunsfile=\jobname.ctr
\catcode`\%=11\relax
\immediate\write\@counttexrunsfile
{%% This file '\jobname.ctr' was generated by the package counttexruns}
\catcode`\%=14\relax
\immediate\write\@counttexrunsfile{\arabic{counttexruns}}
\immediate\closeout\@counttexrunsfile


\endinput
